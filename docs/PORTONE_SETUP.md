# 포트원(PortOne) 결제 시스템 설정 가이드

## 🎯 목표

사업자 등록증 없이 **테스트 모드**로 결제 시스템을 먼저 구현하고, 나중에 사업자 등록증을 제출하여 실결제로 전환하는 방법입니다.

---

## ✅ 1단계: 포트원 계정 생성 (테스트 모드)

### 포트원 가입

1. **포트원 대시보드 접속**
   - https://admin.portone.io 접속
   - "회원가입" 클릭

2. **회원가입 정보 입력**
   - 이메일 주소 입력
   - 비밀번호 설정
   - 약관 동의
   - **⚠️ 사업자 등록증은 나중에 제출 가능 (테스트 모드에서는 불필요)**

3. **이메일 인증**
   - 이메일로 전송된 인증 링크 클릭
   - 인증 완료

4. **대시보드 접속**
   - 로그인 후 대시보드 화면 확인

---

## ✅ 2단계: 테스트 Store 생성

### Store 생성

1. **대시보드에서 "Store" 메뉴 클릭**
2. **"+ Store 추가" 버튼 클릭**
3. **Store 정보 입력**
   - Store 이름: `Academy Site` (또는 원하는 이름)
   - Store 설명: `제어 비행기 4주 특강 결제`
   - **⚠️ 테스트 모드이므로 사업자 정보는 나중에 입력 가능**
4. **"저장" 클릭**

### 테스트 키 확인

Store 생성 후:

1. **생성된 Store 클릭**
2. **"Settings" → "API Keys" 메뉴 클릭**
3. **다음 정보 확인 및 복사:**
   - **Store ID**: `store_xxxxx` (예: `store_1234567890abcdef`)
   - **Channel Key**: `channel_xxxxx` (예: `channel_1234567890abcdef`)
   - ⚠️ **이 정보를 안전하게 보관하세요!**

---

## ✅ 3단계: 환경 변수 설정

프로젝트 루트의 `.env.local` 파일에 다음 내용 추가:

```env
# 포트원(PortOne) 설정
PORTONE_STORE_ID=store_xxxxx
PORTONE_CHANNEL_KEY=channel_xxxxx

# 포트원 API URL (테스트 모드)
PORTONE_API_URL=https://api.portone.io

# 결제 성공 후 리다이렉트 URL
NEXT_PUBLIC_PAYMENT_SUCCESS_URL=http://localhost:3000/program/airplane/success
NEXT_PUBLIC_PAYMENT_FAIL_URL=http://localhost:3000/program/airplane/fail
```

**⚠️ 중요:**
- `store_xxxxx`와 `channel_xxxxx`를 실제 발급받은 키로 교체하세요
- `.env.local` 파일은 절대 Git에 커밋하지 마세요!

---

## ✅ 4단계: 포트원 SDK 설치

터미널에서 다음 명령어 실행:

```bash
cd /Users/hkjtop/academy-site
npm install @portone/browser-sdk/v2
```

---

## ✅ 5단계: 결제 시스템 구현

### 구현할 파일들

1. **결제 버튼 컴포넌트** (`components/PaymentButton.tsx`)
2. **결제 API 라우트** (`app/api/payment/route.ts`)
3. **결제 성공 페이지** (`app/program/airplane/success/page.tsx`)
4. **결제 실패 페이지** (`app/program/airplane/fail/page.tsx`)

---

## 🧪 6단계: 테스트 결제

### 테스트 카드 정보

포트원 테스트 모드에서는 다음 테스트 카드로 결제 테스트가 가능합니다:

**성공 테스트 카드:**
- 카드번호: `1234-5678-9012-3456`
- 유효기간: `12/34`
- CVV: `123`
- 카드 비밀번호: `12` (앞 2자리)

**실패 테스트 카드:**
- 카드번호: `4000-0000-0000-0002` (잔액 부족)

---

## 📋 7단계: 실결제 전환 (나중에)

### 사업자 등록증 제출

1. **포트원 대시보드 접속**
2. **"Settings" → "사업자 정보" 메뉴 클릭**
3. **사업자 등록증 업로드**
4. **심사 완료 대기** (1-2일 소요)

### 실결제 모드 전환

1. **Store 설정에서 "실결제 모드" 전환**
2. **실제 카드로 테스트 결제 진행**
3. **정상 작동 확인**

---

## ⚠️ 중요 사항

### 테스트 모드 vs 실결제 모드

**테스트 모드:**
- ✅ 사업자 등록증 불필요
- ✅ 실제 돈이 나가지 않음
- ✅ 개발 및 테스트에 적합
- ⚠️ 실제 결제는 불가능

**실결제 모드:**
- ⚠️ 사업자 등록증 필요
- ⚠️ 실제 돈이 나감
- ✅ 실제 고객 결제 가능
- ⚠️ 심사 기간 필요 (1-2일)

### 보안 주의사항

1. **API 키는 절대 공개하지 마세요**
2. **`.env.local` 파일은 Git에 커밋하지 마세요**
3. **프로덕션 환경에서는 환경 변수로 관리하세요**

---

## 📞 다음 단계

포트원 계정 생성 및 테스트 키 발급이 완료되면:

1. 환경 변수 설정
2. 포트원 SDK 설치
3. 결제 시스템 구현

**준비가 되면 알려주세요!**














