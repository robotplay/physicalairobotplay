# 시스템 테스트 가이드

## 📋 목차
1. [관리자 대시보드 테스트](#1-관리자-대시보드-테스트)
2. [수강 신청 플로우 테스트](#2-수강-신청-플로우-테스트)
3. [이메일 및 접근 시스템 테스트](#3-이메일-및-접근-시스템-테스트)
4. [배포 전 체크리스트](#4-배포-전-체크리스트)

---

## 1. 관리자 대시보드 테스트

### 1.1 로그인 시스템
- [ ] `/admin/login` 접속
- [ ] 올바른 계정으로 로그인 시도
  - 아이디: `admin`
  - 비밀번호: 환경변수 확인
- [ ] Toast 알림 확인 ("로그인 성공!")
- [ ] `/admin` 페이지로 리다이렉트 확인
- [ ] 잘못된 비밀번호로 로그인 시도
  - 에러 Toast 확인
- [ ] 로그아웃 버튼 클릭
  - `/admin/login`으로 리다이렉트 확인

### 1.2 강사 관리
- [ ] "강사 관리" 탭 클릭
- [ ] "강사 추가" 버튼 클릭
- [ ] 신규 강사 정보 입력
  ```
  아이디: teacher01
  비밀번호: Test1234!
  이름: 홍길동
  이메일: teacher@test.com
  연락처: 010-1234-5678
  ```
- [ ] "생성" 버튼 클릭
- [ ] Toast 알림 확인 ("강사 계정이 생성되었습니다")
- [ ] 강사 목록에서 새 강사 확인
- [ ] 강사 클릭하여 상세 정보 확인
- [ ] "수정" 버튼으로 정보 변경
- [ ] "활성/비활성" 토글 테스트
- [ ] "삭제" 버튼 테스트 (확인 다이얼로그)

### 1.3 온라인 강좌 관리
- [ ] "온라인 강좌" 탭 클릭
- [ ] "강좌 추가" 버튼 클릭
- [ ] 강좌 정보 입력
  ```
  제목: 테스트 강좌
  설명: 테스트용 강좌입니다
  가격: 50000
  정원: 4
  카테고리: Basic Course
  ```
- [ ] 리치 에디터로 콘텐츠 작성
- [ ] 이미지 업로드 테스트
- [ ] "추가" 버튼 클릭
- [ ] Toast 알림 확인
- [ ] 강좌 목록에서 확인

### 1.4 계정 설정
- [ ] "계정 설정" 탭 클릭
- [ ] 프로필 정보 수정
- [ ] "프로필 저장" 클릭
- [ ] Toast 알림 확인
- [ ] 비밀번호 변경 테스트
  - 현재 비밀번호 입력
  - 새 비밀번호 입력
  - 확인 비밀번호 입력
- [ ] "비밀번호 변경" 클릭
- [ ] Toast 알림 확인

---

## 2. 수강 신청 플로우 테스트

### 2.1 강좌 목록 확인
- [ ] 메인 페이지 접속
- [ ] "온라인 강좌" 섹션 스크롤
- [ ] 강좌 카드 표시 확인
- [ ] "강의 보기" 버튼 클릭

### 2.2 강좌 상세 페이지
- [ ] 강좌 제목/설명 표시 확인
- [ ] 리치 콘텐츠 렌더링 확인
- [ ] 이미지/비디오 표시 확인
- [ ] 가격/정원 정보 확인
- [ ] "지금 신청하기" 버튼 클릭

### 2.3 결제 페이지
- [ ] 신청 폼 표시 확인
- [ ] 필수 항목 입력
  ```
  학생명: 김테스트
  학년: 초등 3학년
  보호자명: 김학부모
  연락처: 010-9999-8888
  이메일: test@example.com (필수!)
  ```
- [ ] "신청하기" 버튼 클릭
- [ ] 결제 진행 (테스트 카드 사용)

### 2.4 신청 완료
- [ ] 성공 페이지 표시 확인
- [ ] Toast 알림 확인
- [ ] 관리자 페이지에서 신청 내역 확인

---

## 3. 이메일 및 접근 시스템 테스트

### 3.1 이메일 수신
- [ ] 신청 완료 후 이메일 확인
- [ ] 이메일 제목 확인
  ```
  [피지컬 AI 로봇플레이] [강좌명] 수강 신청 완료
  ```
- [ ] 이메일 내용 확인
  - 학생 정보
  - 강좌 정보
  - 접근 코드 (6자리)
  - "지금 수강하기" 버튼

### 3.2 직접 링크 접근
- [ ] 이메일의 "지금 수강하기" 버튼 클릭
- [ ] 강좌 페이지로 이동 확인
- [ ] 토큰 검증 확인
- [ ] 콘텐츠 접근 가능 확인

### 3.3 접근 코드 입력
- [ ] `/online-courses/access` 직접 접속
- [ ] 6자리 접근 코드 입력
- [ ] "수강 시작하기" 버튼 클릭
- [ ] Toast 알림 확인 ("확인 완료!")
- [ ] 강좌 페이지로 리다이렉트 확인

### 3.4 잘못된 접근 시도
- [ ] 유효하지 않은 코드 입력
- [ ] 에러 Toast 확인
- [ ] 만료된 토큰 테스트 (필요시)

---

## 4. 배포 전 체크리스트

### 4.1 환경변수 설정
```bash
# 필수 환경변수
MONGODB_URI=mongodb+srv://...
JWT_SECRET=your-secure-random-string-here
NEXT_PUBLIC_SITE_URL=https://parplay.co.kr

# 이메일 설정 (선택)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password

# 결제 설정
NEXT_PUBLIC_PORTONE_STORE_ID=your-store-id
NEXT_PUBLIC_PORTONE_CHANNEL_KEY=your-channel-key
PORTONE_API_SECRET=your-api-secret
```

### 4.2 보안 체크
- [ ] JWT_SECRET이 강력한 랜덤 문자열인지 확인
- [ ] 프로덕션 환경에서 HTTPS 사용 확인
- [ ] 민감한 정보가 클라이언트에 노출되지 않는지 확인
- [ ] API 엔드포인트 권한 체크 확인

### 4.3 성능 체크
- [ ] 빌드 성공 확인 (`npm run build`)
- [ ] 번들 크기 확인
- [ ] 이미지 최적화 확인
- [ ] 페이지 로딩 속도 테스트

### 4.4 데이터베이스
- [ ] MongoDB 연결 테스트
- [ ] 컬렉션 인덱스 확인
  ```javascript
  // online_enrollments
  db.online_enrollments.createIndex({ "accessCode": 1 })
  db.online_enrollments.createIndex({ "email": 1 })
  db.online_enrollments.createIndex({ "courseId": 1 })
  
  // users
  db.users.createIndex({ "username": 1 }, { unique: true })
  db.users.createIndex({ "role": 1 })
  ```
- [ ] 백업 설정 확인

### 4.5 모니터링
- [ ] 에러 로깅 설정 확인
- [ ] Vercel Analytics 설정 확인
- [ ] 이메일 발송 로그 확인

---

## 5. 알려진 이슈 및 개선 사항

### 5.1 현재 제한사항
1. **이메일 발송**: 실제 SMTP 설정 필요
2. **결제**: PortOne 설정 필요
3. **파일 업로드**: 용량 제한 확인 필요

### 5.2 향후 개선 예정
1. **소셜 로그인** (Google, Kakao)
2. **회원 시스템** (포인트, 쿠폰)
3. **알림톡** (카카오 알림)
4. **대시보드 분석** (수강 통계)

---

## 6. 문제 해결

### 6.1 로그인 안 됨
```bash
# 관리자 계정 초기화
curl -X POST https://your-domain.com/api/admin/init

# 또는 MongoDB에서 직접 확인
db.users.find({ role: "admin" })
```

### 6.2 이메일 안 옴
1. 스팸 폴더 확인
2. SMTP 설정 확인
3. 서버 로그 확인:
   ```bash
   # Vercel 로그 확인
   vercel logs
   ```

### 6.3 토큰 검증 실패
1. JWT_SECRET 일치 확인
2. 토큰 만료 확인
3. DB에 enrollment 존재 확인

### 6.4 빌드 실패
```bash
# 의존성 재설치
rm -rf node_modules package-lock.json
npm install

# 타입 체크
npm run type-check

# 린터 확인
npm run lint
```

---

## 7. 테스트 시나리오 예시

### 시나리오 A: 신규 학생 수강 신청
1. 메인 페이지 → 온라인 강좌 섹션
2. "Python 기초 과정" 강의 보기 클릭
3. 강좌 내용 확인
4. "지금 신청하기" 클릭
5. 신청 정보 입력
6. 결제 진행
7. 이메일 수신 확인
8. 이메일 링크로 수강 시작
9. ✅ 성공: 강좌 콘텐츠 확인

### 시나리오 B: 접근 코드로 수강
1. `/online-courses/access` 접속
2. 이메일에서 받은 6자리 코드 입력
3. "수강 시작하기" 클릭
4. ✅ 성공: 강좌 페이지로 이동

### 시나리오 C: 관리자 강좌 관리
1. 관리자 로그인
2. "온라인 강좌" 탭 이동
3. 새 강좌 추가
4. 리치 에디터로 내용 작성
5. 이미지/비디오 삽입
6. 저장
7. ✅ 성공: 메인 페이지에서 강좌 표시 확인

---

## 📞 지원

문제가 발생하면:
1. 먼저 이 가이드의 "문제 해결" 섹션 확인
2. 서버 로그 확인 (`vercel logs` 또는 브라우저 콘솔)
3. GitHub Issues에 문제 등록

**Happy Testing! 🚀**

