# MongoDB ì¸ë±ìŠ¤ ìƒì„± ë‹¨ê³„ë³„ ê°€ì´ë“œ (MongoDB Atlas UI)

## ğŸ“‹ í˜„ì¬ ìƒíƒœ í™•ì¸

ì´ë¯¸ì§€ì—ì„œ í™•ì¸ëœ ì •ë³´:
- **í´ëŸ¬ìŠ¤í„°**: academy-cluster
- **ë°ì´í„°ë² ì´ìŠ¤**: academy-site
- **í˜„ì¬ ì¸ë±ìŠ¤**: 13ê°œ
- **ì»¬ë ‰ì…˜**: 13ê°œ

---

## ğŸš€ ë‹¨ê³„ë³„ ì‹¤í–‰ ë°©ë²•

### 1ë‹¨ê³„: MongoDB Atlas ì ‘ì† ë° ë°ì´í„°ë² ì´ìŠ¤ ì„ íƒ

1. **MongoDB Atlas ì›¹ì‚¬ì´íŠ¸ ì ‘ì†**
   - https://cloud.mongodb.com/ ì ‘ì†
   - ë¡œê·¸ì¸

2. **í”„ë¡œì íŠ¸ ì„ íƒ**
   - ìƒë‹¨ì—ì„œ "Project 0" ë˜ëŠ” í•´ë‹¹ í”„ë¡œì íŠ¸ ì„ íƒ

3. **Database ë©”ë‰´ í´ë¦­**
   - ì™¼ìª½ ë©”ë‰´ì—ì„œ **"Database"** í´ë¦­
   - ë˜ëŠ” ìƒë‹¨ ë©”ë‰´ì—ì„œ **"Database"** ì„ íƒ

4. **Browse Collections í´ë¦­**
   - Database í˜ì´ì§€ì—ì„œ **"Browse Collections"** ë²„íŠ¼ í´ë¦­
   - ë˜ëŠ” ì™¼ìª½ ì‚¬ì´ë“œë°”ì˜ **"Data Explorer"** ì„¹ì…˜ì—ì„œ **"academy-cluster"** í™•ì¥

5. **ë°ì´í„°ë² ì´ìŠ¤ ì„ íƒ**
   - ì™¼ìª½ ì‚¬ì´ë“œë°”ì—ì„œ **"academy-cluster"** í™•ì¥
   - **"academy-site"** ë°ì´í„°ë² ì´ìŠ¤ í´ë¦­

---

### 2ë‹¨ê³„: ì»¬ë ‰ì…˜ í™•ì¸ ë° ìƒì„± (í•„ìš”í•œ ê²½ìš°)

1. **ì»¬ë ‰ì…˜ ëª©ë¡ í™•ì¸**
   - ì™¼ìª½ ì‚¬ì´ë“œë°”ì—ì„œ **"academy-site"** ì•„ë˜ì˜ ì»¬ë ‰ì…˜ ëª©ë¡ í™•ì¸
   - ë˜ëŠ” ë©”ì¸ í™”ë©´ì—ì„œ ì»¬ë ‰ì…˜ ëª©ë¡ í™•ì¸

2. **`students` ì»¬ë ‰ì…˜ì´ ì—†ëŠ” ê²½ìš°**
   
   **ì˜µì…˜ A: ê´€ë¦¬ì í˜ì´ì§€ì—ì„œ í•™ìƒ ë“±ë¡ (ê¶Œì¥)**
   - https://www.parplay.co.kr/admin ì ‘ì†
   - ë¡œê·¸ì¸ â†’ **í•™ìƒ ê´€ë¦¬** â†’ **í•™ìƒ ë“±ë¡**
   - í•™ìƒ ì •ë³´ ì…ë ¥ í›„ ì €ì¥
   - â†’ `students` ì»¬ë ‰ì…˜ì´ ìë™ ìƒì„±ë©ë‹ˆë‹¤!
   
   **ì˜µì…˜ B: MongoDB Shellë¡œ ìˆ˜ë™ ìƒì„±**
   ```javascript
   use('academy-site');
   db.createCollection('students');
   ```
   
   **ì˜µì…˜ C: Atlas UIì—ì„œ ìˆ˜ë™ ìƒì„±**
   - `academy-site` ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ **"+ Create"** ë˜ëŠ” **"Create Collection"** í´ë¦­
   - Collection Name: `students` ì…ë ¥
   - Create í´ë¦­

3. **ì»¬ë ‰ì…˜ ì„ íƒ**
   - ì¸ë±ìŠ¤ë¥¼ ìƒì„±í•  ì»¬ë ‰ì…˜ í´ë¦­ (ì˜ˆ: **"students"**)

4. **Indexes íƒ­ í´ë¦­**
   - ì»¬ë ‰ì…˜ ìƒì„¸ í™”ë©´ ìƒë‹¨ì— ì—¬ëŸ¬ íƒ­ì´ ìˆìŠµë‹ˆë‹¤:
     - **Documents** (ê¸°ë³¸)
     - **Indexes** â† **ì´ íƒ­ í´ë¦­**
     - **Schema** (ìˆëŠ” ê²½ìš°)

---

### 3ë‹¨ê³„: ì¸ë±ìŠ¤ ìƒì„±

#### ë°©ë²• A: Create Index ë²„íŠ¼ ì‚¬ìš© (ê¶Œì¥)

1. **Create Index ë²„íŠ¼ í´ë¦­**
   - Indexes íƒ­ì—ì„œ ìš°ì¸¡ ìƒë‹¨ì˜ **"Create Index"** ë²„íŠ¼ í´ë¦­
   - ë˜ëŠ” **"+"** ì•„ì´ì½˜ í´ë¦­

2. **Index Definition ì…ë ¥**
   - **"Index Definition"** í•„ë“œì— JSON í˜•ì‹ìœ¼ë¡œ ì…ë ¥:
     ```json
     { "studentId": 1 }
     ```
   - ë˜ëŠ” **"Visual Editor"** ëª¨ë“œì—ì„œ:
     - **Field Name**: `studentId`
     - **Sort Order**: `1` (ì˜¤ë¦„ì°¨ìˆœ) ë˜ëŠ” `-1` (ë‚´ë¦¼ì°¨ìˆœ)

3. **Unique ì˜µì…˜ (í•„ìš”í•œ ê²½ìš°)**
   - Unique ì¸ë±ìŠ¤ê°€ í•„ìš”í•œ ê²½ìš°:
     - **"Unique"** ì²´í¬ë°•ìŠ¤ ì²´í¬
     - ì˜ˆ: `online_enrollments.accessCode`, `users.username`

4. **Create ë²„íŠ¼ í´ë¦­**
   - í•˜ë‹¨ì˜ **"Create"** ë˜ëŠ” **"Create Index"** ë²„íŠ¼ í´ë¦­

5. **ìƒì„± í™•ì¸**
   - ì¸ë±ìŠ¤ê°€ ìƒì„±ë˜ë©´ Indexes ëª©ë¡ì— í‘œì‹œë©ë‹ˆë‹¤
   - ìƒíƒœê°€ **"Ready"**ë¡œ í‘œì‹œë  ë•Œê¹Œì§€ ëŒ€ê¸° (ë³´í†µ ëª‡ ì´ˆ)

---

### 4ë‹¨ê³„: ë‚˜ë¨¸ì§€ ì¸ë±ìŠ¤ ìƒì„± (ë°˜ë³µ)

ê°™ì€ ì»¬ë ‰ì…˜ì— ì—¬ëŸ¬ ì¸ë±ìŠ¤ë¥¼ ìƒì„±í•˜ë ¤ë©´:

1. **ë‹¤ì‹œ Create Index í´ë¦­**
2. **ë‹¤ìŒ ì¸ë±ìŠ¤ ì •ì˜ ì…ë ¥**
3. **Create í´ë¦­**
4. **ë°˜ë³µ**

---

## ğŸ“ ì»¬ë ‰ì…˜ë³„ ì¸ë±ìŠ¤ ìƒì„± ìˆœì„œ

### students ì»¬ë ‰ì…˜ (8ê°œ ì¸ë±ìŠ¤)

1. `{ "studentId": 1 }` â­ **ìµœìš°ì„ **
2. `{ "studentId": 1, "_id": 1 }`
3. `{ "parentPhone": 1 }` â­ **í•™ë¶€ëª¨ ë¡œê·¸ì¸ìš©**
4. `{ "parentEmail": 1 }`
5. `{ "name": 1 }`
6. `{ "grade": 1 }`
7. `{ "class": 1 }`
8. `{ "createdAt": -1 }`

**ìƒì„± ë°©ë²•:**
- Index Definition: `{ "studentId": 1 }` ì…ë ¥
- Create í´ë¦­
- ë°˜ë³µí•˜ì—¬ ë‚˜ë¨¸ì§€ 7ê°œ ìƒì„±

---

### attendance ì»¬ë ‰ì…˜ (5ê°œ ì¸ë±ìŠ¤)

1. `{ "studentId": 1 }` â­ **ìµœìš°ì„ **
2. `{ "studentId": 1, "classDate": -1 }`
3. `{ "classDate": -1 }`
4. `{ "studentClass": 1, "classDate": -1 }`
5. `{ "studentId": 1, "studentClass": 1, "classDate": 1 }`

**ë³µí•© ì¸ë±ìŠ¤ ì…ë ¥ ë°©ë²•:**
- Index Definition: `{ "studentId": 1, "classDate": -1 }`
- ì—¬ëŸ¬ í•„ë“œëŠ” ì‰¼í‘œë¡œ êµ¬ë¶„

---

### online_enrollments ì»¬ë ‰ì…˜ (5ê°œ ì¸ë±ìŠ¤)

1. `{ "accessCode": 1 }` âš ï¸ **Unique ì²´í¬ í•„ìˆ˜!**
2. `{ "email": 1 }`
3. `{ "courseId": 1 }`
4. `{ "email": 1, "courseId": 1 }`
5. `{ "createdAt": -1 }`

**Unique ì¸ë±ìŠ¤ ìƒì„± ë°©ë²•:**
- Index Definition: `{ "accessCode": 1 }`
- **"Unique"** ì²´í¬ë°•ìŠ¤ ì²´í¬ âœ…
- Create í´ë¦­

---

### news ì»¬ë ‰ì…˜ (3ê°œ ì¸ë±ìŠ¤)

1. `{ "category": 1, "createdAt": -1 }`
2. `{ "createdAt": -1 }`
3. `{ "isPublished": 1, "createdAt": -1 }`

---

### payments ì»¬ë ‰ì…˜ (5ê°œ ì¸ë±ìŠ¤)

1. `{ "paymentId": 1 }`
2. `{ "orderId": 1 }`
3. `{ "customerEmail": 1 }`
4. `{ "status": 1, "timestamp": -1 }`
5. `{ "timestamp": -1 }`

---

### faq ì»¬ë ‰ì…˜ (3ê°œ ì¸ë±ìŠ¤)

1. `{ "category": 1, "order": 1 }`
2. `{ "isActive": 1, "order": 1 }`
3. `{ "order": 1 }`

---

### users ì»¬ë ‰ì…˜ (4ê°œ ì¸ë±ìŠ¤)

1. `{ "username": 1 }` âš ï¸ **Unique ì²´í¬ í•„ìˆ˜!**
2. `{ "email": 1 }`
3. `{ "role": 1 }`
4. `{ "username": 1, "role": 1 }`

---

### ê¸°íƒ€ ì»¬ë ‰ì…˜

#### monthly_newsletters (2ê°œ)
- `{ "year": -1, "month": -1 }`
- `{ "createdAt": -1 }`

#### student_feedback (2ê°œ)
- `{ "studentId": 1, "date": -1 }`
- `{ "date": -1 }`

#### competitions (2ê°œ)
- `{ "year": -1, "month": -1 }`
- `{ "createdAt": -1 }`

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

### 1. Unique ì¸ë±ìŠ¤
- `online_enrollments.accessCode`: **Unique ì²´í¬ í•„ìˆ˜**
- `users.username`: **Unique ì²´í¬ í•„ìˆ˜**
- Unique ì¸ë±ìŠ¤ëŠ” ì¤‘ë³µ ê°’ì„ í—ˆìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤

### 2. ë³µí•© ì¸ë±ìŠ¤ ìˆœì„œ
- í•„ë“œ ìˆœì„œê°€ ì¤‘ìš”í•©ë‹ˆë‹¤
- `{ "studentId": 1, "classDate": -1 }` â‰  `{ "classDate": -1, "studentId": 1 }`
- ìì£¼ ì‚¬ìš©ë˜ëŠ” í•„ë“œë¥¼ ì•ì— ë°°ì¹˜

### 3. ì¸ë±ìŠ¤ ìƒì„± ì‹œê°„
- ë°ì´í„°ê°€ ë§ì„ ê²½ìš° ìƒì„±ì— ì‹œê°„ì´ ê±¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤
- ëŒ€ìš©ëŸ‰ ì»¬ë ‰ì…˜ì€ ë°±ê·¸ë¼ìš´ë“œ ì¸ë±ìŠ¤ ìƒì„± ê¶Œì¥

### 4. ê¸°ì¡´ ì¸ë±ìŠ¤ í™•ì¸
- Indexes íƒ­ì—ì„œ ê¸°ì¡´ ì¸ë±ìŠ¤ í™•ì¸
- ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì¸ë±ìŠ¤ëŠ” ìƒì„±í•˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤

---

## âœ… ì¸ë±ìŠ¤ ìƒì„± í™•ì¸

### ë°©ë²• 1: Indexes íƒ­ì—ì„œ í™•ì¸
- ê° ì»¬ë ‰ì…˜ì˜ Indexes íƒ­ì—ì„œ ìƒì„±ëœ ì¸ë±ìŠ¤ ëª©ë¡ í™•ì¸
- ìƒíƒœê°€ **"Ready"**ì¸ì§€ í™•ì¸

### ë°©ë²• 2: MongoDB Shellì—ì„œ í™•ì¸
```javascript
use('academy-site');
db.students.getIndexes();
db.attendance.getIndexes();
// ... ê¸°íƒ€ ì»¬ë ‰ì…˜
```

---

## ğŸ¯ ìš°ì„ ìˆœìœ„ë³„ ìƒì„± ìˆœì„œ

### 1ìˆœìœ„ (ì¦‰ì‹œ ìƒì„±)
1. `students.studentId`
2. `attendance.studentId`
3. `online_enrollments.accessCode` (unique)

### 2ìˆœìœ„
4. `students.parentPhone`
5. `news.createdAt`
6. `payments.paymentId`

### 3ìˆœìœ„
7. ë‚˜ë¨¸ì§€ ì¸ë±ìŠ¤ë“¤

---

## ğŸ“Š ì˜ˆìƒ ì†Œìš” ì‹œê°„

- **ì†Œê·œëª¨ ì»¬ë ‰ì…˜** (< 1,000 ë¬¸ì„œ): ì¸ë±ìŠ¤ë‹¹ 1-5ì´ˆ
- **ì¤‘ê·œëª¨ ì»¬ë ‰ì…˜** (1,000 - 10,000 ë¬¸ì„œ): ì¸ë±ìŠ¤ë‹¹ 5-30ì´ˆ
- **ëŒ€ê·œëª¨ ì»¬ë ‰ì…˜** (> 10,000 ë¬¸ì„œ): ì¸ë±ìŠ¤ë‹¹ 30ì´ˆ - ëª‡ ë¶„

**ì „ì²´ ì¸ë±ìŠ¤ ìƒì„± ì˜ˆìƒ ì‹œê°„**: 5-15ë¶„

---

## ğŸ’¡ íŒ

1. **í•œ ë²ˆì— í•˜ë‚˜ì”© ìƒì„±**
   - ì—¬ëŸ¬ ì¸ë±ìŠ¤ë¥¼ ë™ì‹œì— ìƒì„±í•˜ì§€ ë§ê³  í•˜ë‚˜ì”© ìƒì„±
   - ê° ì¸ë±ìŠ¤ê°€ ì™„ë£Œë  ë•Œê¹Œì§€ ëŒ€ê¸°

2. **ì¤‘ìš”í•œ ì¸ë±ìŠ¤ë¶€í„°**
   - `studentId`, `parentPhone` ë“± ìì£¼ ì‚¬ìš©ë˜ëŠ” í•„ë“œë¶€í„° ìƒì„±

3. **ì—ëŸ¬ ë°œìƒ ì‹œ**
   - "Index already exists" ì—ëŸ¬ëŠ” ë¬´ì‹œí•´ë„ ë©ë‹ˆë‹¤ (ì´ë¯¸ ì¡´ì¬)
   - ë‹¤ë¥¸ ì—ëŸ¬ëŠ” MongoDB Atlas ì§€ì›íŒ€ì— ë¬¸ì˜

---

**ì‘ì„±ì¼**: 2025ë…„ 1ì›” 2ì¼  
**ìƒíƒœ**: ë‹¨ê³„ë³„ ê°€ì´ë“œ ì™„ë£Œ

