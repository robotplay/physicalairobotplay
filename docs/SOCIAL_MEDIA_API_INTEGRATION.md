# ì†Œì…œ ë¯¸ë””ì–´ API ì—°ë™ ê°€ì´ë“œ

## ê°œìš”

Facebookê³¼ Instagramì— ì‹¤ì œë¡œ í¬ìŠ¤íŒ…í•˜ê¸° ìœ„í•´ì„œëŠ” ê° í”Œë«í¼ì˜ Graph APIë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

## í•„ìš”í•œ ì¤€ë¹„ì‚¬í•­

### 1. Facebook Developer ê³„ì • ë° ì•± ìƒì„±

#### Step 1: Facebook ê³„ì • í™•ì¸ ë° ì¤€ë¹„

**Facebook ê°œì¸ ê³„ì •ì´ í•„ìš”í•©ë‹ˆë‹¤:**
- Facebook DeveloperëŠ” Facebook ê°œì¸ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•´ì•¼ í•©ë‹ˆë‹¤
- ë¹„ì¦ˆë‹ˆìŠ¤ í˜ì´ì§€ ê³„ì •ì´ ì•„ë‹Œ **ê°œì¸ Facebook ê³„ì •**ì´ í•„ìš”í•©ë‹ˆë‹¤

**Facebook ê³„ì •ì´ ì—†ë‹¤ë©´:**
1. https://www.facebook.com ì ‘ì†
2. "ìƒˆ ê³„ì • ë§Œë“¤ê¸°" í´ë¦­
3. ì´ë¦„, ì´ë©”ì¼/ì „í™”ë²ˆí˜¸, ìƒë…„ì›”ì¼, ì„±ë³„ ì…ë ¥
4. ë¹„ë°€ë²ˆí˜¸ ì„¤ì •
5. ì´ë©”ì¼/ì „í™”ë²ˆí˜¸ ì¸ì¦ ì™„ë£Œ
6. Facebook ê³„ì • ìƒì„± ì™„ë£Œ

#### Step 2: Facebook Developer ê³„ì • ë“±ë¡

1. **Facebook Developers ì ‘ì†**
   - ë¸Œë¼ìš°ì €ì—ì„œ https://developers.facebook.com ì ‘ì†

2. **ë¡œê·¸ì¸**
   - ìš°ì¸¡ ìƒë‹¨ "ë¡œê·¸ì¸" ë²„íŠ¼ í´ë¦­
   - ìœ„ì—ì„œ ë§Œë“  Facebook ê°œì¸ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸
   - 2ë‹¨ê³„ ì¸ì¦ì´ ì„¤ì •ë˜ì–´ ìˆë‹¤ë©´ ì¸ì¦ ì½”ë“œ ì…ë ¥

3. **Developer ê³„ì • ë“±ë¡**
   - ì²˜ìŒ ì ‘ì†í•˜ë©´ "ê°œë°œìë¡œ ë“±ë¡" ë˜ëŠ” "Register as a Developer" ë²„íŠ¼ í‘œì‹œ
   - í´ë¦­ í›„ ë‹¤ìŒ ì •ë³´ ì…ë ¥:
     - **êµ­ê°€/ì§€ì—­**: ëŒ€í•œë¯¼êµ­ ì„ íƒ
     - **ê°œë°œì ì—­í• **: ìì‹ ì˜ ì—­í•  ì„ íƒ (ì˜ˆ: "ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì")
     - **Facebook Developer ì •ì±… ë™ì˜**: ì²´í¬ë°•ìŠ¤ ì„ íƒ
   - "ë“±ë¡ ì™„ë£Œ" ë˜ëŠ” "Complete Registration" ë²„íŠ¼ í´ë¦­
   - íœ´ëŒ€í° ë²ˆí˜¸ ì¸ì¦ì´ í•„ìš”í•œ ê²½ìš° ë²ˆí˜¸ ì…ë ¥ ë° ì¸ì¦ ì½”ë“œ ì…ë ¥

4. **ë“±ë¡ ì™„ë£Œ í™•ì¸**
   - ëŒ€ì‹œë³´ë“œ í˜ì´ì§€ë¡œ ì´ë™í•˜ë©´ ë“±ë¡ ì™„ë£Œ
   - ì¢Œì¸¡ ë©”ë‰´ì— "ë‚´ ì•±" ë˜ëŠ” "My Apps" ë©”ë‰´ í‘œì‹œ

#### Step 3: Facebook App ìƒì„±

1. **ì•± ë§Œë“¤ê¸° ì‹œì‘**
   - https://developers.facebook.com/apps ì ‘ì†
   - ë˜ëŠ” ëŒ€ì‹œë³´ë“œì—ì„œ "ì•± ë§Œë“¤ê¸°" ë˜ëŠ” "Create App" ë²„íŠ¼ í´ë¦­

2. **ì•± ìœ í˜• ì„ íƒ**
   - ë‹¤ìŒ ì¤‘ í•˜ë‚˜ ì„ íƒ:
     - **"ë¹„ì¦ˆë‹ˆìŠ¤"** (Business) - ê¶Œì¥ (ë§ˆì¼€íŒ…, ìë™ í¬ìŠ¤íŒ…ìš©)
     - **"ì†Œë¹„ì"** (Consumer) - ì¼ë°˜ ì•±ìš©
     - **"ë‹¤ë¥¸"** (Other) - ê¸°íƒ€ ìš©ë„
   - "ë§Œë“¤ê¸°" ë˜ëŠ” "Next" í´ë¦­

3. **ì´ìš© ì‚¬ë¡€ ì„ íƒ (Use Cases)**
   
   ì´ ë‹¨ê³„ì—ì„œëŠ” ì•±ì´ ì–´ë–¤ ìš©ë„ë¡œ ì‚¬ìš©ë ì§€ ì„ íƒí•©ë‹ˆë‹¤.
   
   **ê¶Œì¥ ì„ íƒ (Facebook/Instagram ìë™ í¬ìŠ¤íŒ…ìš©):**
   
   ì™¼ìª½ í•„í„°ì—ì„œ **"Content Management (ì½˜í…ì¸  ê´€ë¦¬)"** ì„ íƒ
   
   ë˜ëŠ” ìƒë‹¨ì˜ í•„í„°ì—ì„œ:
   - **"Content Management (5)"** í´ë¦­
   - ë˜ëŠ” **"All (19)"** ì„ íƒ í›„ í•„ìš”í•œ í•­ëª©ë§Œ ì²´í¬
   
   **ì²´í¬í•´ì•¼ í•  ì´ìš© ì‚¬ë¡€:**
   
   âœ… **"Manage Instagram Content"** ë˜ëŠ” **"Instagram Content Publishing"** 
      - Instagramì— ì½˜í…ì¸ ë¥¼ ê²Œì‹œí•˜ê³  ê´€ë¦¬
   
   âœ… **"Manage Facebook Page Content"** ë˜ëŠ” **"Facebook Page Publishing"**
      - Facebook í˜ì´ì§€ì— í¬ìŠ¤íŠ¸ ê²Œì‹œ ë° ê´€ë¦¬
   
   **ì„ íƒì‚¬í•­:**
   - Marketing API ê´€ë ¨ í•­ëª©ì€ ê´‘ê³ ê°€ ì•„ë‹ˆë¼ë©´ ì„ íƒí•˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤
   - Facebook Loginì€ ì‚¬ìš©ì ì¸ì¦ì´ í•„ìš”í•  ë•Œë§Œ ì„ íƒ
   
   - "Next" ë˜ëŠ” "ë‹¤ìŒ" ë²„íŠ¼ í´ë¦­

   **âš ï¸ ë¹„ì¦ˆë‹ˆìŠ¤ ì¸ì¦ì´ í•„ìš”í•œ ì´ìš© ì‚¬ë¡€:**
   
   ì¼ë¶€ ì´ìš© ì‚¬ë¡€ë¥¼ ì„ íƒí•˜ë©´ "ë¹„ì¦ˆë‹ˆìŠ¤ ì¸ì¦ í•„ìš”" ê²½ê³ ê°€ ë‚˜íƒ€ë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
   
   **ìë™ í¬ìŠ¤íŒ…ì„ ìœ„í•´ ì²´í¬í•´ì•¼ í•  í•­ëª©:**
   
   âœ… **"Instagramì—ì„œ ë©”ì‹œì§€ ë° ì½˜í…ì¸  ê´€ë¦¬"** (Manage Messages and Content on Instagram)
      - Instagram APIë¥¼ í†µí•´ ê²Œì‹œë¬¼ ì˜¬ë¦¬ê¸°, ìŠ¤í† ë¦¬ ê³µìœ , ëŒ“ê¸€ ì‘ë‹µ ë“±
      - ì´ê²ƒì´ ìë™ í¬ìŠ¤íŒ…ì— í•„ìš”í•©ë‹ˆë‹¤!
   
   **ì„ íƒí•˜ì§€ ì•Šì•„ë„ ë˜ëŠ” í•­ëª©:**
   
   âŒ **"Threads API ì•¡ì„¸ìŠ¤"** - Threadsë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ ì„ íƒ ë¶ˆí•„ìš”
   âŒ **"ë‹¤ë¥¸ ì›¹ì‚¬ì´íŠ¸ì— ì½˜í…ì¸  í¼ê°€ê¸°"** - ì„ë² ë“œ ê¸°ëŠ¥ì´ í•„ìš” ì—†ìœ¼ë©´ ì„ íƒ ë¶ˆí•„ìš”
   
   **ë¹„ì¦ˆë‹ˆìŠ¤ ì¸ì¦ì— ëŒ€í•´:**
   
   - ì´ í™”ë©´ì—ì„œ "ì™„ë£Œ" ë²„íŠ¼ì„ í´ë¦­í•´ë„ ë©ë‹ˆë‹¤
   - ë¹„ì¦ˆë‹ˆìŠ¤ ì¸ì¦ì€ **ë‚˜ì¤‘ì— ì™„ë£Œ**í•´ë„ ë©ë‹ˆë‹¤
   - ê°œë°œ ëª¨ë“œì—ì„œëŠ” ìì‹ ì˜ ê³„ì •ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
   - í”„ë¡œë•ì…˜ ì‚¬ìš©ì„ ìœ„í•´ì„œëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤
   - ì¼ë‹¨ ì•±ì„ ìƒì„±í•˜ê³ , ë‚˜ì¤‘ì— ë¹„ì¦ˆë‹ˆìŠ¤ ì¸ì¦ì„ ì§„í–‰í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤
   
   **"ì™„ë£Œ" ë²„íŠ¼ í´ë¦­í•˜ì—¬ ì§„í–‰**

3. **ì•± ê¸°ë³¸ ì •ë³´ ì…ë ¥**
   - **ì•± í‘œì‹œ ì´ë¦„**: ì˜ˆ) "í”¼ì§€ì»¬ AI êµìœ¡ ë§ˆì¼€íŒ…"
   - **ì•± ì—°ë½ì²˜ ì´ë©”ì¼**: ì‹¤ì œ ì´ë©”ì¼ ì£¼ì†Œ (ì•± ê´€ë ¨ ì•Œë¦¼ ìˆ˜ì‹ )
   - **ì•± ìš©ë„ ì„ íƒ**: "ë¹„ì¦ˆë‹ˆìŠ¤ ê´€ë¦¬" ë˜ëŠ” "ë§ˆì¼€íŒ…" ì„ íƒ
   - "ì•± ë§Œë“¤ê¸°" ë˜ëŠ” "Create App" í´ë¦­

4. **ë³´ì•ˆ í™•ì¸ (í•„ìš”í•œ ê²½ìš°)**
   - CAPTCHA ë˜ëŠ” ë³´ì•ˆ í™•ì¸ ë‹¨ê³„ ì™„ë£Œ

#### Step 4: ì œí’ˆ ì¶”ê°€ (Products)

ì•± ìƒì„± í›„ ì œí’ˆ ì¶”ê°€ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤. ë‹¤ìŒ ì œí’ˆë“¤ì„ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤:

**Facebook Login ì¶”ê°€:**
1. "Facebook ë¡œê·¸ì¸" ë˜ëŠ” "Facebook Login" ì°¾ê¸°
2. "ì„¤ì •" ë˜ëŠ” "Set Up" ë²„íŠ¼ í´ë¦­
3. "ì›¹" ë˜ëŠ” "Web" ì„ íƒ (ë˜ëŠ” ê±´ë„ˆë›°ê¸° ê°€ëŠ¥)

**Instagram Graph API ì¶”ê°€:**
1. "Instagram Graph API" ì°¾ê¸°
2. "ì„¤ì •" ë˜ëŠ” "Set Up" ë²„íŠ¼ í´ë¦­
3. Instagram ê³„ì • ì—°ê²° ì•ˆë‚´ê°€ ë‚˜ì˜¤ë©´ ë‚˜ì¤‘ì— ì—°ê²° ê°€ëŠ¥ (Skip)

**Pages (ì„ íƒì‚¬í•­, í•˜ì§€ë§Œ ê¶Œì¥):**
1. "Facebook Pages" ì°¾ê¸°
2. "ì„¤ì •" ë˜ëŠ” "Set Up" í´ë¦­
3. í˜ì´ì§€ ê´€ë¦¬ ê¶Œí•œ ì„¤ì •

#### Step 5: ì•± ì„¤ì • (App Settings)

1. **ì¢Œì¸¡ ë©”ë‰´ì—ì„œ "ì„¤ì •" â†’ "ê¸°ë³¸ ì„¤ì •"** ì„ íƒ

2. **ì•± ë„ë©”ì¸ ì¶”ê°€** (ì„ íƒì‚¬í•­ì´ì§€ë§Œ ê¶Œì¥):
   - "ì•± ë„ë©”ì¸" í•„ë“œì— ë„ë©”ì¸ ì…ë ¥: ì˜ˆ) `parplay.co.kr`
   - ì €ì¥

3. **í”Œë«í¼ ì¶”ê°€**:
   - "í”Œë«í¼ ì¶”ê°€" ë˜ëŠ” "Add Platform" ë²„íŠ¼ í´ë¦­
   - "ì›¹ì‚¬ì´íŠ¸" ì„ íƒ
   - ì‚¬ì´íŠ¸ URL ì…ë ¥: ì˜ˆ) `https://parplay.co.kr`

4. **ì•± ID ë° ì•± ì‹œí¬ë¦¿ í™•ì¸**:
   - **ì•± ID** (App ID): ë‚˜ì¤‘ì— í•„ìš”
   - **ì•± ì‹œí¬ë¦¿** (App Secret): "í‘œì‹œ" í´ë¦­í•˜ì—¬ í™•ì¸ (ë³´ì•ˆì— ì£¼ì˜)

#### Step 6: ê¶Œí•œ ë° ê¸°ëŠ¥ ì„¤ì •

1. **ì¢Œì¸¡ ë©”ë‰´ì—ì„œ "ì œí’ˆ" â†’ "Facebook ë¡œê·¸ì¸" â†’ "ì„¤ì •"** ì„ íƒ

2. **ìœ íš¨í•œ OAuth ë¦¬ë””ë ‰ì…˜ URI ì¶”ê°€** (ë‚˜ì¤‘ì— í•„ìš”í•  ìˆ˜ ìˆìŒ):
   - "ìœ íš¨í•œ OAuth ë¦¬ë””ë ‰ì…˜ URI" ì„¹ì…˜
   - ì˜ˆ) `https://parplay.co.kr/api/auth/facebook/callback`
   - (í˜„ì¬ëŠ” ìë™ í¬ìŠ¤íŒ…ë§Œ ì‚¬ìš©í•˜ë¯€ë¡œ ë‚˜ì¤‘ì— ì¶”ê°€ ê°€ëŠ¥)

3. **ê¶Œí•œ ì„¤ì •**:
   - "ì•± ê²€í† " â†’ "ê¶Œí•œ ë° ê¸°ëŠ¥" ë©”ë‰´
   - í•„ìš”í•œ ê¶Œí•œ ìš”ì²­ (ì¼ë°˜ì ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì€ ê¶Œí•œ í•„ìš”):
     - `pages_manage_posts` - í˜ì´ì§€ í¬ìŠ¤íŠ¸ ê´€ë¦¬
     - `pages_read_engagement` - í˜ì´ì§€ ì°¸ì—¬ë„ ì½ê¸°
     - `instagram_basic` - Instagram ê¸°ë³¸ ì •ë³´
     - `instagram_content_publish` - Instagram ì½˜í…ì¸  ê²Œì‹œ
   - ì£¼ì˜: ì¼ë¶€ ê¶Œí•œì€ ì•± ê²€í† ê°€ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤

#### Step 7: ì•± ìƒíƒœ í™•ì¸

1. **ì•± ìƒíƒœ í™•ì¸**:
   - ì•± ëŒ€ì‹œë³´ë“œì—ì„œ "ì•± ìƒíƒœ" í™•ì¸
   - ì´ˆê¸°ì—ëŠ” "ê°œë°œ ëª¨ë“œ" (Development Mode) ìƒíƒœ
   - ê°œë°œ ëª¨ë“œì—ì„œëŠ” ìì‹ ì˜ Facebook ê³„ì •ìœ¼ë¡œë§Œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥

2. **ë¹„ì¦ˆë‹ˆìŠ¤ ì¸ì¦ (ë‚˜ì¤‘ì— ì™„ë£Œ ê°€ëŠ¥)**:
   
   **ë¹„ì¦ˆë‹ˆìŠ¤ ì¸ì¦ì´ í•„ìš”í•œ ê²½ìš°:**
   - Instagram/Facebook Pagesì— ìë™ í¬ìŠ¤íŒ…ì„ ìœ„í•´ì„œëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ì¸ì¦ì´ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
   - í•˜ì§€ë§Œ ê°œë°œ ë° í…ŒìŠ¤íŠ¸ ë‹¨ê³„ì—ì„œëŠ” ì¸ì¦ ì—†ì´ë„ ì‘ë™í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
   
   **ë¹„ì¦ˆë‹ˆìŠ¤ ì¸ì¦ ë°©ë²• (ë‚˜ì¤‘ì— ì§„í–‰):**
   1. Facebook Business Manager ì ‘ì†: https://business.facebook.com
   2. ë¹„ì¦ˆë‹ˆìŠ¤ ê³„ì • ìƒì„± ë˜ëŠ” ê¸°ì¡´ ë¹„ì¦ˆë‹ˆìŠ¤ì— ì•± ì—°ê²°
   3. ë¹„ì¦ˆë‹ˆìŠ¤ ì¸ì¦ ì‹ ì²­ (ì‹ ë¶„ì¦, ì‚¬ì—…ìë“±ë¡ì¦ ë“± ì œì¶œ)
   4. ì¸ì¦ ì™„ë£Œê¹Œì§€ ë©°ì¹  ì†Œìš”ë  ìˆ˜ ìˆìŒ
   
   **ê°œë°œ ëª¨ë“œì—ì„œ í…ŒìŠ¤íŠ¸:**
   - ë¹„ì¦ˆë‹ˆìŠ¤ ì¸ì¦ì´ ì—†ì–´ë„ ê°œë°œ ëª¨ë“œì—ì„œëŠ” ìì‹ ì˜ í˜ì´ì§€/ê³„ì •ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥
   - Page Access Tokenì„ ë°œê¸‰ë°›ìœ¼ë©´ ìë™ í¬ìŠ¤íŒ… í…ŒìŠ¤íŠ¸ ê°€ëŠ¥

3. **ì•± ê³µê°œ (ë‚˜ì¤‘ì—)**:
   - í”„ë¡œë•ì…˜ ì‚¬ìš©ì„ ìœ„í•´ì„œëŠ” "ì•± ê²€í† " â†’ "ì•± ì •ë³´ í™•ì¸" ì™„ë£Œ í•„ìš”
   - í•˜ì§€ë§Œ ìë™ í¬ìŠ¤íŒ…ì˜ ê²½ìš° ê°œë°œ ëª¨ë“œì—ì„œë„ ì‘ë™ ê°€ëŠ¥

### 2. ì•¡ì„¸ìŠ¤ í† í° (Access Token) ë°œê¸‰

Facebookê³¼ Instagram APIë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ **Page Access Token**ì´ í•„ìš”í•©ë‹ˆë‹¤.

#### Step 1: Facebook í˜ì´ì§€ í™•ì¸

1. **Facebook í˜ì´ì§€ê°€ ìˆëŠ”ì§€ í™•ì¸**:
   - https://www.facebook.com/pages/manage ì ‘ì†
   - ê´€ë¦¬í•˜ëŠ” í˜ì´ì§€ ëª©ë¡ í™•ì¸
   - í˜ì´ì§€ê°€ ì—†ë‹¤ë©´ í˜ì´ì§€ ìƒì„± í•„ìš”

2. **í˜ì´ì§€ ìƒì„± (ì—†ëŠ” ê²½ìš°)**:
   - https://www.facebook.com/pages/create ì ‘ì†
   - í˜ì´ì§€ ìœ í˜• ì„ íƒ (ì˜ˆ: "ë¹„ì¦ˆë‹ˆìŠ¤ ë˜ëŠ” ë¸Œëœë“œ")
   - í˜ì´ì§€ ì´ë¦„, ì¹´í…Œê³ ë¦¬ ì…ë ¥
   - í”„ë¡œí•„ ì‚¬ì§„, ì»¤ë²„ ì‚¬ì§„ ì¶”ê°€
   - í˜ì´ì§€ ìƒì„± ì™„ë£Œ

#### Step 2: Facebook í˜ì´ì§€ë¥¼ ì•±ì— ì—°ê²°

1. **Graph API Explorer ì‚¬ìš©**:
   - https://developers.facebook.com/tools/explorer ì ‘ì†
   - ìš°ì¸¡ ìƒë‹¨ì—ì„œ ìƒì„±í•œ ì•± ì„ íƒ

2. **í˜ì´ì§€ ì•¡ì„¸ìŠ¤ í† í° ìƒì„±**:
   - "ì‚¬ìš©ì ë˜ëŠ” í˜ì´ì§€" ë“œë¡­ë‹¤ìš´ì—ì„œ "í˜ì´ì§€" ì„ íƒ
   - ê´€ë¦¬í•˜ëŠ” í˜ì´ì§€ ì„ íƒ
   - "í˜ì´ì§€ ì•¡ì„¸ìŠ¤ í† í° ìƒì„±" ë˜ëŠ” "Generate Page Access Token" í´ë¦­
   - í† í°ì´ ìƒì„±ë˜ë©´ ë³µì‚¬ (ì´ í† í°ì„ í™˜ê²½ ë³€ìˆ˜ì— ì €ì¥)

#### Step 3: Instagram Business Account ID í™•ì¸

1. **Instagram ê³„ì •ì„ ë¹„ì¦ˆë‹ˆìŠ¤ ê³„ì •ìœ¼ë¡œ ì „í™˜** (ì•„ì§ ì•ˆ í–ˆë‹¤ë©´):
   - Instagram ì•± ì—´ê¸°
   - í”„ë¡œí•„ â†’ ì„¤ì • â†’ ê³„ì •
   - "ì „ë¬¸ ê³„ì •ìœ¼ë¡œ ì „í™˜" ì„ íƒ
   - "ë¹„ì¦ˆë‹ˆìŠ¤" ì„ íƒ

2. **Facebook í˜ì´ì§€ì™€ Instagram ì—°ê²°**:
   - Instagram ì•±ì—ì„œ: í”„ë¡œí•„ â†’ ì„¤ì • â†’ ì „ë¬¸ ë„êµ¬ â†’ Facebook í˜ì´ì§€ ì—°ê²°
   - ë˜ëŠ” Facebook í˜ì´ì§€ ì„¤ì •ì—ì„œ: ì„¤ì • â†’ Instagram â†’ Instagram ê³„ì • ì—°ê²°

3. **Instagram Business Account ID í™•ì¸**:
   - Graph API Explorerì—ì„œ: `GET /me/accounts`
   - ë˜ëŠ” ì§ì ‘: `GET /{page-id}?fields=instagram_business_account`
   - ì‘ë‹µì—ì„œ `instagram_business_account.id` ê°’ í™•ì¸ (ì´ ê°’ì´ Instagram Account ID)

#### Step 4: ì¥ê¸° í† í° ìƒì„± (ì„ íƒì‚¬í•­)

Page Access Tokenì€ ì¼ë°˜ì ìœ¼ë¡œ ë§Œë£Œë˜ì§€ ì•Šì§€ë§Œ, ë§Œì•½ ë§Œë£Œê°€ ê±±ì •ëœë‹¤ë©´:

1. **ì¥ê¸° í† í°ìœ¼ë¡œ ë³€í™˜**:
   - Graph API Explorerì—ì„œ ë‹¤ìŒ API í˜¸ì¶œ:
   ```
   GET /{page-id}?fields=access_token&access_token={short-lived-token}
   ```
   - ë˜ëŠ” ì¥ê¸° í† í° ìƒì„± API ì‚¬ìš©

2. **í† í° ë§Œë£Œ í™•ì¸**:
   - Graph API Explorerì—ì„œ: `GET /me?access_token={your-token}`
   - `expires_in` í•„ë“œ í™•ì¸

#### Instagram Business Account ì—°ê²°
- Facebook í˜ì´ì§€ì™€ Instagram ë¹„ì¦ˆë‹ˆìŠ¤ ê³„ì • ì—°ê²° í•„ìš”
- Instagram Graph APIë¥¼ í†µí•´ í¬ìŠ¤íŒ… ê°€ëŠ¥

## í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

`.env.local` íŒŒì¼ì— ë‹¤ìŒ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì¶”ê°€í•˜ì„¸ìš”:

```env
# Facebook Graph API
FACEBOOK_APP_ID=your_facebook_app_id
FACEBOOK_APP_SECRET=your_facebook_app_secret
FACEBOOK_PAGE_ACCESS_TOKEN=your_page_access_token
FACEBOOK_PAGE_ID=your_page_id

# Instagram Graph API
INSTAGRAM_BUSINESS_ACCOUNT_ID=your_instagram_business_account_id
```

## êµ¬í˜„ ë°©ë²•

### 1. Facebook SDK ì„¤ì¹˜

```bash
npm install facebook-nodejs-business-sdk
# ë˜ëŠ”
npm install axios
```

### 2. Facebook í¬ìŠ¤íŒ… API êµ¬í˜„

#### lib/social/facebook.ts ìƒì„±

```typescript
import axios from 'axios';

interface FacebookPostOptions {
  message: string;
  link?: string;
  imageUrl?: string;
}

export async function postToFacebook(options: FacebookPostOptions): Promise<{
  success: boolean;
  postId?: string;
  error?: string;
}> {
  try {
    const { message, link, imageUrl } = options;
    const pageAccessToken = process.env.FACEBOOK_PAGE_ACCESS_TOKEN;
    const pageId = process.env.FACEBOOK_PAGE_ID;

    if (!pageAccessToken || !pageId) {
      throw new Error('Facebook Page Access Token ë˜ëŠ” Page IDê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
    }

    const url = `https://graph.facebook.com/v18.0/${pageId}/feed`;
    
    const params: any = {
      message,
      access_token: pageAccessToken,
    };

    // ì´ë¯¸ì§€ê°€ ìˆëŠ” ê²½ìš° ë¯¸ë””ì–´ ì—…ë¡œë“œ
    if (imageUrl) {
      // ì´ë¯¸ì§€ë¥¼ ë¨¼ì € ì—…ë¡œë“œ
      const photoUrl = `https://graph.facebook.com/v18.0/${pageId}/photos`;
      const photoResponse = await axios.post(photoUrl, {
        url: imageUrl,
        access_token: pageAccessToken,
      });

      if (photoResponse.data.id) {
        params.attached_media = JSON.stringify([{
          media_fbid: photoResponse.data.id,
        }]);
      }
    }

    // ë§í¬ê°€ ìˆëŠ” ê²½ìš° ì¶”ê°€
    if (link) {
      params.link = link;
    }

    const response = await axios.post(url, params);

    return {
      success: true,
      postId: response.data.id,
    };
  } catch (error: any) {
    console.error('Facebook í¬ìŠ¤íŒ… ì˜¤ë¥˜:', error);
    return {
      success: false,
      error: error.response?.data?.error?.message || error.message || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜',
    };
  }
}
```

### 3. Instagram í¬ìŠ¤íŒ… API êµ¬í˜„

#### lib/social/instagram.ts ìƒì„±

```typescript
import axios from 'axios';

interface InstagramPostOptions {
  caption: string;
  imageUrl: string;
  linkUrl?: string;
}

export async function postToInstagram(options: InstagramPostOptions): Promise<{
  success: boolean;
  postId?: string;
  error?: string;
}> {
  try {
    const { caption, imageUrl, linkUrl } = options;
    const accessToken = process.env.FACEBOOK_PAGE_ACCESS_TOKEN; // Instagramë„ Facebook í† í° ì‚¬ìš©
    const instagramAccountId = process.env.INSTAGRAM_BUSINESS_ACCOUNT_ID;

    if (!accessToken || !instagramAccountId) {
      throw new Error('Instagram Access Token ë˜ëŠ” Account IDê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
    }

    // Step 1: ì´ë¯¸ì§€ ì»¨í…Œì´ë„ˆ ìƒì„±
    const containerUrl = `https://graph.facebook.com/v18.0/${instagramAccountId}/media`;
    const containerResponse = await axios.post(containerUrl, {
      image_url: imageUrl,
      caption: caption,
      access_token: accessToken,
    });

    const creationId = containerResponse.data.id;

    // Step 2: ì´ë¯¸ì§€ ê²Œì‹œ
    const publishUrl = `https://graph.facebook.com/v18.0/${instagramAccountId}/media_publish`;
    const publishResponse = await axios.post(publishUrl, {
      creation_id: creationId,
      access_token: accessToken,
    });

    return {
      success: true,
      postId: publishResponse.data.id,
    };
  } catch (error: any) {
    console.error('Instagram í¬ìŠ¤íŒ… ì˜¤ë¥˜:', error);
    return {
      success: false,
      error: error.response?.data?.error?.message || error.message || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜',
    };
  }
}
```

### 4. API Route ì—…ë°ì´íŠ¸

#### app/api/marketing/social/route.ts ìˆ˜ì •

```typescript
import { postToFacebook } from '@/lib/social/facebook';
import { postToInstagram } from '@/lib/social/instagram';

// ... ê¸°ì¡´ ì½”ë“œ ...

if (autoPost) {
    const postResults: Record<string, { success: boolean; postId?: string; error?: string; timestamp: Date }> = {};
    
    for (const platform of platforms) {
        try {
            let result;
            
            if (platform === 'facebook') {
                result = await postToFacebook({
                    message: `${title}\n\n${description}`,
                    link: linkUrl || undefined,
                    imageUrl: imageUrl || undefined,
                });
            } else if (platform === 'instagram') {
                if (!imageUrl) {
                    postResults[platform] = {
                        success: false,
                        error: 'Instagramì€ ì´ë¯¸ì§€ê°€ í•„ìˆ˜ì…ë‹ˆë‹¤.',
                        timestamp: new Date(),
                    };
                    continue;
                }
                result = await postToInstagram({
                    caption: `${title}\n\n${description}${linkUrl ? `\n\nğŸ”— ${linkUrl}` : ''}`,
                    imageUrl,
                });
            } else {
                // ë‹¤ë¥¸ í”Œë«í¼ì€ ì¶”í›„ êµ¬í˜„
                postResults[platform] = {
                    success: false,
                    error: 'ì•„ì§ ì§€ì›í•˜ì§€ ì•ŠëŠ” í”Œë«í¼ì…ë‹ˆë‹¤.',
                    timestamp: new Date(),
                };
                continue;
            }
            
            postResults[platform] = {
                success: result.success,
                postId: result.postId,
                error: result.error,
                timestamp: new Date(),
            };
        } catch (error: any) {
            postResults[platform] = {
                success: false,
                error: error.message || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜',
                timestamp: new Date(),
            };
        }
    }
    
    // ëª¨ë“  í”Œë«í¼ ì„±ê³µ ì—¬ë¶€ í™•ì¸
    const allSuccess = Object.values(postResults).every(r => r.success);
    const allFailed = Object.values(postResults).every(r => !r.success);
    
    postData.status = allSuccess ? 'posted' : (allFailed ? 'failed' : 'posted'); // ë¶€ë¶„ ì„±ê³µë„ posted
    postData.postedAt = new Date();
    postData.postResults = postResults;
}
```

## Instagram ë¹„ì¦ˆë‹ˆìŠ¤ ê³„ì • ì—°ê²° ë°©ë²•

1. **Facebook í˜ì´ì§€ì™€ Instagram ê³„ì • ì—°ê²°**
   - Facebook í˜ì´ì§€ ì„¤ì • â†’ Instagram â†’ Instagram ê³„ì • ì—°ê²°
   - Instagram ê³„ì •ì„ ë¹„ì¦ˆë‹ˆìŠ¤ ê³„ì •ìœ¼ë¡œ ì „í™˜ í•„ìš”

2. **Instagram Business Account ID í™•ì¸**
   - Graph API Explorer ì‚¬ìš©: `GET /me/accounts`
   - ì—°ê²°ëœ Instagram ê³„ì • ì •ë³´ í™•ì¸

## ì£¼ì˜ì‚¬í•­

### 1. í† í° ê´€ë¦¬
- **Short-lived Token**: 1-2ì‹œê°„ ìœ íš¨
- **Long-lived Token**: 60ì¼ ìœ íš¨, ì¬ê°±ì‹  í•„ìš”
- **Page Access Token**: ë§Œë£Œ ì—†ìŒ (ê¶Œì¥)

### 2. Instagram ì œí•œì‚¬í•­
- Instagram Graph APIëŠ” **ë¹„ì¦ˆë‹ˆìŠ¤ ê³„ì •**ë§Œ ì‚¬ìš© ê°€ëŠ¥
- ì´ë¯¸ì§€ëŠ” **í•„ìˆ˜**ì…ë‹ˆë‹¤
- í•˜ë£¨ í¬ìŠ¤íŒ… ì œí•œ: ì•½ 25ê°œ
- ì´ë¯¸ì§€ í¬ê¸°: ìµœì†Œ 320x320px, ê¶Œì¥ 1080x1080px

### 3. Facebook ì œí•œì‚¬í•­
- í•˜ë£¨ í¬ìŠ¤íŒ… ì œí•œ: ì•½ 25ê°œ
- ìŠ¤íŒ¸ ì •ì±… ì¤€ìˆ˜ í•„ìš”
- ì´ë¯¸ì§€ í¬ê¸°: ìµœëŒ€ 2048x2048px

### 4. ë³´ì•ˆ
- Access Tokenì€ **ì ˆëŒ€ í´ë¼ì´ì–¸íŠ¸ì— ë…¸ì¶œ**í•˜ë©´ ì•ˆ ë©ë‹ˆë‹¤
- í™˜ê²½ ë³€ìˆ˜ë¡œë§Œ ê´€ë¦¬
- GitHub ë“±ì— ì»¤ë°‹í•˜ì§€ ì•Šë„ë¡ ì£¼ì˜

## í…ŒìŠ¤íŠ¸ ë°©ë²•

1. **Graph API Explorer ì‚¬ìš©**
   - https://developers.facebook.com/tools/explorer
   - í† í°ìœ¼ë¡œ API ì§ì ‘ í…ŒìŠ¤íŠ¸

2. **ê°œë°œ í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸**
   - `autoPost: true`ë¡œ í¬ìŠ¤íŠ¸ ìƒì„±
   - ì‹¤ì œ í¬ìŠ¤íŒ… í™•ì¸

## íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### í† í° ì˜¤ë¥˜
- í† í°ì´ ë§Œë£Œë˜ì—ˆëŠ”ì§€ í™•ì¸
- í˜ì´ì§€ ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸
- í† í° ê¶Œí•œ ë²”ìœ„ í™•ì¸ (pages_manage_posts, instagram_basic ë“±)

### ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹¤íŒ¨
- ì´ë¯¸ì§€ URLì´ ê³µê°œì ìœ¼ë¡œ ì ‘ê·¼ ê°€ëŠ¥í•œì§€ í™•ì¸
- ì´ë¯¸ì§€ í¬ê¸° ì œí•œ í™•ì¸
- ì´ë¯¸ì§€ í˜•ì‹ í™•ì¸ (JPG, PNG ì§€ì›)

### Instagram í¬ìŠ¤íŒ… ì‹¤íŒ¨
- ë¹„ì¦ˆë‹ˆìŠ¤ ê³„ì •ì¸ì§€ í™•ì¸
- Facebook í˜ì´ì§€ì™€ ì—°ê²°ë˜ì—ˆëŠ”ì§€ í™•ì¸
- ì´ë¯¸ì§€ê°€ í•„ìˆ˜ì¸ì§€ í™•ì¸

## ì°¸ê³  ìë£Œ

- [Facebook Graph API ë¬¸ì„œ](https://developers.facebook.com/docs/graph-api)
- [Instagram Graph API ë¬¸ì„œ](https://developers.facebook.com/docs/instagram-api)
- [Facebook Pages API](https://developers.facebook.com/docs/pages)
- [Instagram Media Publishing](https://developers.facebook.com/docs/instagram-api/guides/content-publishing)

